<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ .title }} - StoneWeigh</title>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com" rel="preconnect"/>
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@200..800&family=Noto+Sans:wght@400;500;600;700&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>

    <!-- Local Vendor Scripts -->
    <script src="/static/vendor/tailwindcss.js"></script>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#136dec",
                        "primary-hover": "#115dc7",
                        "background-light": "#f6f7f8",
                        "background-dark": "#101822",
                        "surface-dark": "#192433",
                        "card-dark": "#192433",
                        "card-hover": "#233348",
                        "border-dark": "#2e3f56",
                        "text-secondary": "#92a9c9",
                        "success": "#0bda5e",
                        "warning": "#eab308",
                    },
                    fontFamily: {
                        "display": ["Manrope", "sans-serif"],
                        "body": ["Noto Sans", "sans-serif"],
                    },
                    borderRadius: {
                        "DEFAULT": "0.25rem",
                        "lg": "0.5rem",
                        "xl": "0.75rem",
                        "2xl": "1rem",
                        "full": "9999px"
                    },
                },
            },
        }
    </script>
    <style>
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: #111822; }
        ::-webkit-scrollbar-thumb { background: #233348; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #324867; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        .material-symbols-outlined { font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24; }
        .material-symbols-filled { font-variation-settings: 'FILL' 1, 'wght' 400, 'GRAD' 0, 'opsz' 24; }
        .blink { animation: blinker 1.5s linear infinite; }
        @keyframes blinker { 50% { opacity: 0; } }
    </style>

    <!-- React Dependencies (Local) -->
    <script src="/static/vendor/react.development.js"></script>
    <script src="/static/vendor/react-dom.development.js"></script>
    <script src="/static/vendor/history.development.js"></script>
    <script src="/static/vendor/react-router.development.js"></script>
    <script src="/static/vendor/react-router-dom.development.js"></script>
    <script src="/static/vendor/babel.min.js"></script>

    <!-- App Components -->
    <script type="text/babel" src="/static/js/components.jsx"></script>
</head>
<body class="bg-background-light dark:bg-background-dark font-display text-slate-900 dark:text-white antialiased overflow-hidden">
    <div id="root"></div>

    <script type="text/babel">
        const root = ReactDOM.createRoot(document.getElementById('root'));

        // Dynamic Component Rendering based on Go Template Variables
        // We use a mapping object to select the component by string name
        const components = {
            "LoginScreen": LoginScreen,
            "DashboardScreen": DashboardScreen,
            "WeighingStationScreen": WeighingStationScreen
        };

        const Component = components["{{ .component }}"];
        const showNav = {{ .showNav }};

        root.render(
            <React.StrictMode>
                <Component />
                {showNav && <MainNavigation />}
            </React.StrictMode>
        );
    </script>
</body>
</html>
